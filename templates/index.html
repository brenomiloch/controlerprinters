<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sua Aplicação</title>

    <!-- Inclua o Bootstrap 5 via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Add these lines inside the <head> tag of your HTML file -->
<script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js.map"></script>

</head>
<body>

<div class="container mt-5">
    <h1>Formulário de Toner</h1>

    <form method="POST">
        <div class="mb-3">
            <label for="serial" class="form-label">Serial:</label>
            <input type="text" class="form-control" id="serial" name="serial" required readonly>
            <button type="button" class="btn btn-secondary" onclick="startBarcodeScanner()">Scan Barcode</button>
        </div>
        

        <div class="mb-3">
            <label for="modelo" class="form-label">Modelo:</label>
            <input type="text" class="form-control" id="modelo" name="modelo" required>
        </div>

        <div class="mb-3">
            <label for="cor" class="form-label">Cor:</label>
            <input type="text" class="form-control" id="cor" name="cor" required>
        </div>

        <button type="submit" class="btn btn-primary">Enviar</button>
    </form>
</div>
<script>
    function startBarcodeScanner() {
        Quagga.init({
            inputStream: {
                name: "Live",
                type: "LiveStream",
                target: document.querySelector('#serial'), // Target the serial input field
                constraints: {
                    width: 480,
                    height: 320,
                },
            },
            locator: {
                patchSize: "medium",
                halfSample: true,
            },
            numOfWorkers: navigator.hardwareConcurrency || 4,
            decoder: {
                readers: ["ean_reader"], // Use the EAN reader for barcode scanning
            },
            locate: true,
            debug: false,
        }, function (err) {
            if (err) {
                console.error(err);
                return;
            }
            Quagga.start();
        });
    }

    Quagga.onDetected(function (result) {
        document.getElementById('serial').value = result.codeResult.code;
        Quagga.stop();
    });
</script>

<!-- Inclua os scripts do Bootstrap 5 via CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-dl4F26ND0u/5eP8IhJE4fCB+TefBZVL9FCkg2zoKxP9IxvZ9W6OnX6GZgvy6zoJ" crossorigin="anonymous"></script>
</body>
</html>
